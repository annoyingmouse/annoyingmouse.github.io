<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8"/>
    <title>MultiSelect</title>
    <link href="../css/bootstrap.css" rel="stylesheet"/>
    <link href="../css/star.css" rel="stylesheet"/>
    <link href="../css/bootstrap-responsive.css" rel="stylesheet"/>
    <link href="../css/font-awesome.css" rel="stylesheet"/>
    <!--[if lt IE 9]>
    <script src="../js/html5.js"></script>
    <![endif]-->
    <style>
        #editor {
            max-height: 250px;
            height: 250px;
            background-color: white;
            border-collapse: separate;
            border: 1px solid rgb(204, 204, 204);
            padding: 4px;
            box-sizing: content-box;
            -webkit-box-shadow: rgba(0, 0, 0, 0.0745098) 0px 1px 1px 0px inset;
                    box-shadow: rgba(0, 0, 0, 0.0745098) 0px 1px 1px 0px inset;
            border-top-right-radius: 3px; border-bottom-right-radius: 3px;
            border-bottom-left-radius: 3px; border-top-left-radius: 3px;
            overflow: scroll;
            outline: none;
        }
        #voiceBtn {
            width: 20px;
            color: transparent;
            background-color: transparent;
            -webkit-transform: scale(2.0, 2.0);
               -moz-transform: scale(2.0, 2.0);
                    transform: scale(2.0, 2.0);
            border: transparent;
            cursor: pointer;
            -webkit-box-shadow: none;
                    box-shadow: none;
        }

        div[data-role="editor-toolbar"] {
            -webkit-user-select: none;
               -moz-user-select: none;
                -ms-user-select: none;
                    user-select: none;
        }

        .dropdown-menu a {
            cursor: pointer;
        }
    </style>
</head>
<body>
<div class="navbar navbar-fixed-top">
    <div class="navbar-inner">
        <div class="container">
            <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </a>
            <a class="brand" href="http://drmsite.com">DRMSite</a>

            <div class="nav-collapse">
                <ul class="nav" id="siteLinks"></ul>
            </div>
        </div>
    </div>
</div>
<div class="container">
    <div class="hero-unit">
        <h1>bootstrap-wysiwyg <br> <small>tiny wysiwyg rich text editor for Bootstrap</small></h1>
        <hr>
        <div class="btn-toolbar" data-role="editor-toolbar" data-target="#editor">
            <div class="btn-group">
                <a class="btn dropdown-toggle" data-toggle="dropdown" title="" data-original-title="Font"><i class="icon-font"></i><b class="caret"></b></a>
                <ul class="dropdown-menu">
                    <li><a data-edit="fontName Serif" style="font-family:'Serif'">Serif</a></li><li><a data-edit="fontName Sans" style="font-family:'Sans'">Sans</a></li><li><a data-edit="fontName Arial" style="font-family:'Arial'">Arial</a></li><li><a data-edit="fontName Arial Black" style="font-family:'Arial Black'">Arial Black</a></li><li><a data-edit="fontName Courier" style="font-family:'Courier'">Courier</a></li><li><a data-edit="fontName Courier New" style="font-family:'Courier New'">Courier New</a></li><li><a data-edit="fontName Comic Sans MS" style="font-family:'Comic Sans MS'">Comic Sans MS</a></li><li><a data-edit="fontName Helvetica" style="font-family:'Helvetica'">Helvetica</a></li><li><a data-edit="fontName Impact" style="font-family:'Impact'">Impact</a></li><li><a data-edit="fontName Lucida Grande" style="font-family:'Lucida Grande'">Lucida Grande</a></li><li><a data-edit="fontName Lucida Sans" style="font-family:'Lucida Sans'">Lucida Sans</a></li><li><a data-edit="fontName Tahoma" style="font-family:'Tahoma'">Tahoma</a></li><li><a data-edit="fontName Times" style="font-family:'Times'">Times</a></li><li><a data-edit="fontName Times New Roman" style="font-family:'Times New Roman'">Times New Roman</a></li><li><a data-edit="fontName Verdana" style="font-family:'Verdana'">Verdana</a></li></ul>
            </div>
            <div class="btn-group">
                <a class="btn dropdown-toggle" data-toggle="dropdown" title="" data-original-title="Font Size"><i class="icon-text-height"></i>&nbsp;<b class="caret"></b></a>
                <ul class="dropdown-menu">
                    <li><a data-edit="fontSize 5"><font size="5">Huge</font></a></li>
                    <li><a data-edit="fontSize 3"><font size="3">Normal</font></a></li>
                    <li><a data-edit="fontSize 1"><font size="1">Small</font></a></li>
                </ul>
            </div>
            <div class="btn-group">
                <a class="btn" data-edit="bold" title="" data-original-title="Bold (Ctrl/Cmd+B)"><i class="icon-bold"></i></a>
                <a class="btn" data-edit="italic" title="" data-original-title="Italic (Ctrl/Cmd+I)"><i class="icon-italic"></i></a>
                <a class="btn" data-edit="strikethrough" title="" data-original-title="Strikethrough"><i class="icon-strikethrough"></i></a>
                <a class="btn" data-edit="underline" title="" data-original-title="Underline (Ctrl/Cmd+U)"><i class="icon-underline"></i></a>
            </div>
            <div class="btn-group">
                <a class="btn" data-edit="insertunorderedlist" title="" data-original-title="Bullet list"><i class="icon-list-ul"></i></a>
                <a class="btn" data-edit="insertorderedlist" title="" data-original-title="Number list"><i class="icon-list-ol"></i></a>
                <a class="btn" data-edit="outdent" title="" data-original-title="Reduce indent (Shift+Tab)"><i class="icon-indent-left"></i></a>
                <a class="btn" data-edit="indent" title="" data-original-title="Indent (Tab)"><i class="icon-indent-right"></i></a>
            </div>
            <div class="btn-group">
                <a class="btn btn-info" data-edit="justifyleft" title="" data-original-title="Align Left (Ctrl/Cmd+L)"><i class="icon-align-left"></i></a>
                <a class="btn" data-edit="justifycenter" title="" data-original-title="Center (Ctrl/Cmd+E)"><i class="icon-align-center"></i></a>
                <a class="btn" data-edit="justifyright" title="" data-original-title="Align Right (Ctrl/Cmd+R)"><i class="icon-align-right"></i></a>
                <a class="btn" data-edit="justifyfull" title="" data-original-title="Justify (Ctrl/Cmd+J)"><i class="icon-align-justify"></i></a>
            </div>
            <div class="btn-group">
                <a class="btn dropdown-toggle" data-toggle="dropdown" title="" data-original-title="Hyperlink"><i class="icon-link"></i></a>
                <div class="dropdown-menu input-append">
                    <input class="span2" placeholder="URL" type="text" data-edit="createLink">
                    <button class="btn" type="button">Add</button>
                </div>
                <a class="btn" data-edit="unlink" title="" data-original-title="Remove Hyperlink"><i class="icon-cut"></i></a>

            </div>

            <div class="btn-group">
                <a class="btn" title="" id="pictureBtn" data-original-title="Insert picture (or just drag &amp; drop)"><i class="icon-picture"></i></a>
                <input type="file" data-role="magic-overlay" data-target="#pictureBtn" data-edit="insertImage" style="opacity: 0; position: absolute; top: 0px; left: 0px; width: 37px; height: 30px;">
            </div>
            <div class="btn-group">
                <a class="btn" data-edit="undo" title="" data-original-title="Undo (Ctrl/Cmd+Z)"><i class="icon-undo"></i></a>
                <a class="btn" data-edit="redo" title="" data-original-title="Redo (Ctrl/Cmd+Y)"><i class="icon-repeat"></i></a>
            </div>
            <input type="text" data-edit="inserttext" id="voiceBtn" x-webkit-speech="" style="position: absolute; top: 280px; left: 1440px;">
        </div>
        <div id="editor" contenteditable="true">
            Go aheadâ€¦
        </div>
    </div>

    <button onclick="TogetherJS(this); return false;">Start TogetherJS</button>


    <fieldset id="multiSelectFieldset">
        <legend class="hide">Multi Select</legend>
        <label for="fromList" class="hide">From List</label>
        <select id="fromList" name="fromList" multiple="multiple">
            <option>One</option>
            <option>Two</option>
            <option>Three</option>
            <option>Four</option>
            <option>Five</option>
        </select>
        <label for="toList" class="hide">From List</label>
        <select id="toList" name="toList" multiple="multiple"></select>
    </fieldset>
</div>
<div class="container">
    <div class="box">
        <div class="box-header">
            <h4>Events</h4>
        </div>
        <div class="box-content cf">
            <div class="dateDropdown t-r cf">
                <select id="eventYears"></select>
            </div>
            <ul class="eventMembers cf"></ul>
        </div>
    </div>
</div>
<div class="container">
    <div class="slide">
        <div class="summary">
            <p>Summary: Lorem Ipsum Dolor Sit Amet.</p>
        </div>
        <!-- end .summary -->
        <div class="details">
            <p>Details: Lorem Ipsum Dolor Sit Amet.</p>
        </div>
        <!-- end .details -->
        <a class="more-less-button" href="#">Less</a>
    </div>
    <!-- end .slide -->
</div>
<div class="container">
    <p class="randomId" data-id="fred">Hello World</p>
    <p class="randomId" data-id="sue">Hello World</p>
    <p class="randomId" data-id="james">Hello World</p>
    <p class="randomId" data-id="alfred">Hello World</p>
    <p class="randomId" data-id="sean">Hello World</p>
    <p class="randomId" data-id="mehdi">Hello World</p>
</div>


<script src="../js/jquery.js"></script>
<script src="../js/bootstrap.js"></script>
<script src="../js/vars.js"></script>
<script src="../js/functions.js"></script>
<script src="../js/workings.js"></script>
<script src="../js/jquery.hotkeys.js"></script>
<script src="../js/bootstrap-wysiwyg.js"></script>
<script src="https://togetherjs.com/togetherjs-min.js"></script>
<script>
    $(function () {
        $("#editor").wysiwyg();
        // $("p[data-id='fred']").each(function(){
        //     alert("Found Fred");
        // });


        sortList("fromList");
        $('#fromList').change(function () {
            moveOption("fromList", "toList")
            sortList("toList");
        });
        $("#toList").change(function () {
            moveOption("toList", "fromList")
            sortList("fromList");
        });
        // NEW STUFF
        $(".details").hide();
        $(".more-less-button").click(function (event) {
            event.preventDefault();
            $this = $(this);
            if ($this.parent('.slide').hasClass('expanded')) {
                $this.siblings(".details").slideUp('slow').end().html("More");
                $this.parents('.slide').removeClass('expanded');
            } else {
                $('.slide.expanded').each(function () {
                    $(this).removeClass('expanded').find('.details').slideUp('slow');
                    $this.html("More");
                });
                $this.siblings(".details").slideDown('slow').end().html("Less");
                $this.parents('.slide').addClass('expanded');
            }
        });
    });
    function sortList(id) {
        var options = $("#" + id + " option");
        options.sort(function (a, b) {
            if (a.text > b.text) return 1;
            else if (a.text < b.text) return -1;
            else return 0
        });
        $("#" + id).empty().append(options);
    }
    function moveOption(from, to) {
        var option = $("#" + from + " option:selected").clone();
        $("#" + from + " option:selected").remove();
        $("#" + to).append(option);
    }
    var today = new Date();
    var nextWeek = new Date(2013,4,4,12,0);
    var nextYear = new Date(2014,4,4);
    /*
     A function that determines whether BST is currently in effect in London,
     based on the date on the user's PC, but regardless of whether the user
     is in London, or somewhere else. BST runs between the last Sunday of
     March, and the last Sunday of October, with a varying date each year.
     */
    function isBSTinEffect(d) {
        for (var i = 31; i > 0; i--) {
            var tmp = new Date(d.getFullYear(), 2, i);
            if (tmp.getDay() == 0) {
                lSoM = tmp;
                console.log(lSoM)
                break;
            }
        }
        for (var i = 31; i > 0; i--) {
            var tmp = new Date(d.getFullYear(), 9, i);
            if (tmp.getDay() == 0) {
                lSoO = tmp;
                break;
            }
        }
        if (d < lSoM || d > lSoO){
            return false;
        }else{
            return true;
        }
    }
    function correctTime(eventDate, today){
        var returnDate = 0;
        var today = today || new Date();
        var todayBST = isBSTinEffect(today);
        var eventBST = isBSTinEffect(eventDate);
        if(!todayBST && eventBST){
            returnDate = -100;
        }
        if(todayBST && !eventBST){
            returnDate = 100;
        }
        return returnDate;
    }
    nextWeek = correctTime(nextWeek);
    //alert(new Date(nextWeek));

</script>
</body>
</html>